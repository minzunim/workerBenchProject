<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>워크샵 상세 페이지</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/workshops/css/workshop-detail.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    
  </head>
  <body>
    <%- include ("header.ejs") %>    
    <!-- 워크샵 상품 이미지 -->
    <div class="container text-center">
      <div class="row">
        <div class="col">
          <div class="workshop-thumb">
            <img src="/images/eraser-class-thumb.jpg" alt="..." />
          </div>
        </div>

        <!-- 워크샵 개요 -->
        <div class="col">
          <div class="workshop-summary">
            <div class="workshop-title">워크샵 제목</div>
            <div class="workshop-star">별점</div>
            <div class="workshop-category">온라인</div>
            <div class="workshop-location">
              활동 가능 지역 &nbsp<span>서울/경기</span>
            </div>
            <div class="workshop-member-cnt">인원 &nbsp<span>00명</span></div>
            <div class="workshop-total-time">시간 &nbsp<span>00분</span></div>
            <div class="workshop-genre">분야 &nbsp<span>예술</span></div>
            <div class="workshop-purpose">목적 &nbsp<span>힐링</span></div>
            <div class="workshop-price">38500원</div>
            <div>*1인 기준</div>
            <div class="order-wish-buttons">
              <button type="button" class="btn btn-primary order" data-bs-toggle="modal" data-bs-target="#exampleModal">
                신청하기
              </button>
              <button type="button" class="btn btn-outline-primary wish">
                찜하기
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 워크샵 신청하기 Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">워크샵 신청하기</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form action="" method="post">
                <div class="mb-3">
                  <input type="text" class="form-control" id="recipient-name" placeholder="회사명" required>
                </div>
                <div class="mb-3">
                  <input type="text" class="form-control" id="recipient-name" placeholder="신청자 성함" required>
                </div>
                <div class="mb-3">
                  <input type="email" class="form-control" id="recipient-name" placeholder="이메일" required>
                </div>
                <div class="mb-3">
                  <input type="text" class="form-control" id="recipient-name" placeholder="전화번호" required>
                  <p>* '-' 없이 입력해주세요. (ex. 01012341234)</p>
                </div>
                <div class="mb-3">
                  <input type="number" class="form-control" name="member_cnt" id="member_cnt" placeholder="인원" min=1>
                </div>
                <div class="mb-3">
                  <input type="date" class="form-control" name="wish_date" id="wish_date" min="{{strTomorrow}}">
                  <p>* 희망하는 진행일을 선택해주세요.</p>
                </div>
                <div class="on-off-buttons">
                  <button id="hideAddress" type="button" class="btn btn-primary">
                    온라인
                  </button>
                  <button id="showAddress" type="button" class="btn btn-outline-primary">
                    오프라인
                  </button>
                </div>
                <div class="mb-3" id="address">
                  <input id="zip-code"  type="text" placeholder="우편번호 검색" readonly onclick="findAddr()"> <br>
                  <input id="input-address" type="text" placeholder="주소" value="주소" readonly> <br>
                  <input id="input_addr_detail" type="text" placeholder="상세 주소">
                </div>
                <div class="mb-3">
                  <input type="email" class="form-control" id="recipient-name" placeholder="목적">
                </div>
                <div class="mb-3">
                  <textarea class="form-control" id="message-text" placeholder="기타 문의"></textarea>
                </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소하기</button>
              <button type="submit" class="btn btn-primary">제출하기</button>
            </form>
            </div>
          </div>
        </div>
      </div>
      
   <!-- 하단 탭 (상세정보 / 후기) -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button
          class="nav-link active"
          id="home-tab"
          data-bs-toggle="tab"
          data-bs-target="#home-tab-pane"
          type="button"
          role="tab"
          aria-controls="home-tab-pane"
          aria-selected="true"
        >
          상세 정보
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="profile-tab"
          data-bs-toggle="tab"
          data-bs-target="#profile-tab-pane"
          type="button"
          role="tab"
          aria-controls="profile-tab-pane"
          aria-selected="false"
        >
          후기
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="contact-tab"
          data-bs-toggle="tab"
          data-bs-target="#contact-tab-pane"
          type="button"
          role="tab"
          aria-controls="contact-tab-pane"
          aria-selected="false"
        >
          환불 규정
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="disabled-tab"
          data-bs-toggle="tab"
          data-bs-target="#disabled-tab-pane"
          type="button"
          role="tab"
          aria-controls="disabled-tab-pane"
          aria-selected="false"
        >
          배송비
        </button>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div
        class="tab-pane fade show active"
        id="home-tab-pane"
        role="tabpanel"
        aria-labelledby="home-tab"
        tabindex="0"
      >
        워크샵 상세 정보입니다.
      </div>
      <div
        class="tab-pane fade"
        id="profile-tab-pane"
        role="tabpanel"
        aria-labelledby="profile-tab"
        tabindex="0"
      >
      <div class="card mb-3" style="max-width: 700px; margin-top: 50px">
        <div class="row g-0">
          <div class="col-md-4">
            <img src="/images/eraser-class-review.jpg" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <p class="card-text">고객들의 후기 내용입니다.</p>
              <p class="card-text">별점</p>
              <p class="card-text"><small class="text-muted">후기 작성 날짜</small></p>
            </div>
          </div>
        </div>
      </div>
      </div>
      <div
        class="tab-pane fade"
        id="contact-tab-pane"
        role="tabpanel"
        aria-labelledby="contact-tab"
        tabindex="0"
      >
        ...
      </div>
      <div
        class="tab-pane fade"
        id="disabled-tab-pane"
        role="tabpanel"
        aria-labelledby="disabled-tab"
        tabindex="0"
      >
        ...
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script>
      // 모달창 온라인 버튼 클릭 시: 주소 창 숨김, 오프라인 버튼 클릭 시: 주소 창 보이기
      $(function() {
          $("#showAddress").on("click", function() {
              $("#address").show();
          })
          $("#hideAddress").on("click", function() {
              $("#address").hide();
          })
      })

      // 달력에 내일 날짜 가져오기
      let tomorrow = new Date();
      tomorrow.setDate(new Date().getDate() + 1);
      document.getElementById("wish_date").valueAsDate = tomorrow;

      // 내일 날짜 문자열로 변경
      const strTomorrow = tomorrow.toISOString().split('T')[0];
      
      // user 로그인 여부 데이터 확인 후 false면 워크샵 문의 신청 막기
      const user = '<%= user %>'
      const modal = document.querySelector('#exampleModal')
      modal.addEventListener('show.bs.modal', (e) => {
        if(user === 'false')
        alert('로그인 이후 이용 가능합니다!')
        e.preventDefault()
      })

  </script>
  </body>
</html>
